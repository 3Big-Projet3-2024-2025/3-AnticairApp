<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) on Mon Jan 06 02:02:01 CET 2025 -->
<title>ListingController</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2025-01-06">
<meta name="description" content="declaration: package: be.anticair.anticairapi.keycloak.controller, class: ListingController">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/ListingController.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li>Field</li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">be.anticair.anticairapi.keycloak.controller</a></div>
<h1 title="Class ListingController" class="title">Class ListingController</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">be.anticair.anticairapi.keycloak.controller.ListingController</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="annotations">@RestController
@RequestMapping("/api/listing")
</span><span class="modifiers">public class </span><span class="element-name type-name-label">ListingController</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">REST Controller for managing listing in the database.</div>
<dl class="notes">
<dt>Author:</dt>
<dd>Blommaert Youry, Neve Thierry, Zarzycki Alexis</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">ListingController</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>org.springframework.http.ResponseEntity<wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#acceptAntiquity(java.util.Map)" class="member-name-link">acceptAntiquity</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;otherInformation)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Accept an antiquity,  send mails adn apply commission.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>org.springframework.http.ResponseEntity<wbr>&lt;?&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#buyListing(java.lang.Integer)" class="member-name-link">buyListing</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;id)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Handles the purchase process for a specific listing by its ID.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>org.springframework.http.ResponseEntity<wbr>&lt;?&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createListing(java.lang.String,java.lang.String,java.lang.String,java.lang.Double,java.util.List)" class="member-name-link">createListing</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;email,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;title,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;description,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Double.html" title="class or interface in java.lang" class="external-link">Double</a>&nbsp;price,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;org.springframework.web.multipart.MultipartFile&gt;&nbsp;photos)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Create a new listing in the database.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>org.springframework.http.ResponseEntity<wbr>&lt;?&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#executePayment(java.lang.String,java.lang.String)" class="member-name-link">executePayment</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;paymentId,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;payerId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Executes a payment transaction using PayPal API.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>org.springframework.http.ResponseEntity<wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../Class/Listing.html" title="class in be.anticair.anticairapi.Class">Listing</a>&gt;&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getAllListingsChecked()" class="member-name-link">getAllListingsChecked</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get all listings in the database.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>org.springframework.http.ResponseEntity<wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../Class/ListingWithPhotosDto.html" title="class in be.anticair.anticairapi.Class">ListingWithPhotosDto</a>&gt;&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getAntiquitiesByMailSeller(java.lang.String)" class="member-name-link">getAntiquitiesByMailSeller</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;mailSeller)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves a list of antiquities with their associated photos for a specific seller's email.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>org.springframework.http.ResponseEntity<wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../Class/ListingWithPhotosDto.html" title="class in be.anticair.anticairapi.Class">ListingWithPhotosDto</a>&gt;&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getAntiquitiesByState(java.lang.String)" class="member-name-link">getAntiquitiesByState</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;mailAntiquarian)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Endpoint to retrieve all antiquities associated with a specific antiquarian that have a state of 0 or 1.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>org.springframework.http.ResponseEntity<wbr>&lt;<a href="../../Class/ListingWithPhotosDto.html" title="class in be.anticair.anticairapi.Class">ListingWithPhotosDto</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getListingById(java.lang.Integer)" class="member-name-link">getListingById</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;id)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves a listing by its ID along with its associated photos.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>org.springframework.http.ResponseEntity<wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#rejectAntiquity(java.util.Map)" class="member-name-link">rejectAntiquity</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;otherInformation)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Reject an antiquity and send mails.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>org.springframework.http.ResponseEntity<wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateAntiquityWithPhotos(java.lang.Integer,java.lang.String,java.util.List)" class="member-name-link">updateAntiquityWithPhotos</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;id,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;antiquityJson,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;org.springframework.web.multipart.MultipartFile&gt;&nbsp;images)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Updates an existing antiquity and its associated photos.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>org.springframework.http.ResponseEntity<wbr>&lt;<a href="../../Class/Listing.html" title="class in be.anticair.anticairapi.Class">Listing</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateIsDisplay(java.lang.Long)" class="member-name-link">updateIsDisplay</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;id)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Updates the 'isDisplay' field of a listing to false based on the provided ID.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>ListingController</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">ListingController</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="updateAntiquityWithPhotos(java.lang.Integer,java.lang.String,java.util.List)">
<h3>updateAntiquityWithPhotos</h3>
<div class="member-signature"><span class="annotations">@PutMapping("/{id}")
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">org.springframework.http.ResponseEntity&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&gt;</span>&nbsp;<span class="element-name">updateAntiquityWithPhotos</span><wbr><span class="parameters">(@PathVariable
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;id,
 @RequestParam("antiquity")
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;antiquityJson,
 @RequestParam(value="images",required=false)
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;org.springframework.web.multipart.MultipartFile&gt;&nbsp;images)</span></div>
<div class="block">Updates an existing antiquity and its associated photos.

 <p>This endpoint allows updating an antiquity's details (such as price, description, title, etc.)
 and optionally uploading new photos. The antiquity details are provided as a JSON string,
 which is deserialized into a <a href="../../Class/Listing.html" title="class in be.anticair.anticairapi.Class"><code>Listing</code></a> object. The photos are provided as a list of
 <code>MultipartFile</code> objects. If photos are provided, they are updated alongside the antiquity details.</p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>id</code> - the ID of the antiquity to update</dd>
<dd><code>antiquityJson</code> - a JSON string representing the new details of the antiquity</dd>
<dd><code>images</code> - a list of <code>MultipartFile</code> objects representing the new photos to associate with the antiquity (optional)</dd>
<dt>Returns:</dt>
<dd>a <code>ResponseEntity</code> containing a message indicating success or failure</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="../service/ListingService.html#updateListing(java.lang.Long,be.anticair.anticairapi.Class.Listing)"><code>ListingService.updateListing(Long, Listing)</code></a></li>
<li><a href="../service/PhotoAntiquityService.html#updatePhotos(java.lang.Integer,java.util.List)"><code>PhotoAntiquityService.updatePhotos(Integer, List)</code></a></li>
<li><a href="../../Class/Listing.html" title="class in be.anticair.anticairapi.Class"><code>Listing</code></a></li>
<li><code>MultipartFile</code></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createListing(java.lang.String,java.lang.String,java.lang.String,java.lang.Double,java.util.List)">
<h3>createListing</h3>
<div class="member-signature"><span class="annotations">@PostMapping("/create")
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">org.springframework.http.ResponseEntity&lt;?&gt;</span>&nbsp;<span class="element-name">createListing</span><wbr><span class="parameters">(@RequestParam("email")
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;email,
 @RequestParam("title")
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;title,
 @RequestParam("description")
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;description,
 @RequestParam("price")
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Double.html" title="class or interface in java.lang" class="external-link">Double</a>&nbsp;price,
 @RequestParam(value="photos",required=false)
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;org.springframework.web.multipart.MultipartFile&gt;&nbsp;photos)</span></div>
<div class="block">Create a new listing in the database.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>email</code> - The email of the user creating the listing.</dd>
<dd><code>title</code> - The title of the listing.</dd>
<dd><code>description</code> - The description of the listing.</dd>
<dd><code>price</code> - The price of the listing.</dd>
<dd><code>photos</code> - The images associated with the listing.</dd>
<dt>Returns:</dt>
<dd>ResponseEntity indicating the creation status.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getListingById(java.lang.Integer)">
<h3>getListingById</h3>
<div class="member-signature"><span class="annotations">@GetMapping("/{id}")
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">org.springframework.http.ResponseEntity&lt;<a href="../../Class/ListingWithPhotosDto.html" title="class in be.anticair.anticairapi.Class">ListingWithPhotosDto</a>&gt;</span>&nbsp;<span class="element-name">getListingById</span><wbr><span class="parameters">(@PathVariable
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;id)</span></div>
<div class="block">Retrieves a listing by its ID along with its associated photos.

 <p>This endpoint retrieves a listing and its associated photos using the given ID.
 If the listing is found, it returns a <a href="../../Class/ListingWithPhotosDto.html" title="class in be.anticair.anticairapi.Class"><code>ListingWithPhotosDto</code></a> object in the response.
 If no listing is found with the provided ID, it returns a <code>HttpStatus.NOT_FOUND</code> response.</p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>id</code> - the ID of the listing to retrieve</dd>
<dt>Returns:</dt>
<dd>a <code>ResponseEntity</code> containing a <a href="../../Class/ListingWithPhotosDto.html" title="class in be.anticair.anticairapi.Class"><code>ListingWithPhotosDto</code></a> object if found,
         or a <code>HttpStatus.NOT_FOUND</code> status if the listing is not found</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="../service/ListingService.html#getListingById(java.lang.Integer)"><code>ListingService.getListingById(Integer)</code></a></li>
<li><a href="../../Class/ListingWithPhotosDto.html" title="class in be.anticair.anticairapi.Class"><code>ListingWithPhotosDto</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAllListingsChecked()">
<h3>getAllListingsChecked</h3>
<div class="member-signature"><span class="annotations">@GetMapping("/checked")
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">org.springframework.http.ResponseEntity&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../Class/Listing.html" title="class in be.anticair.anticairapi.Class">Listing</a>&gt;&gt;</span>&nbsp;<span class="element-name">getAllListingsChecked</span>()</div>
<div class="block">Get all listings in the database.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>ResponseEntity containing a list of all listings.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="rejectAntiquity(java.util.Map)">
<h3>rejectAntiquity</h3>
<div class="member-signature"><span class="annotations">@PreAuthorize("hasAuthority(\'ROLE_Antiquarian\')")
@PutMapping("/rejectAntiquity")
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">org.springframework.http.ResponseEntity&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&gt;</span>&nbsp;<span class="element-name">rejectAntiquity</span><wbr><span class="parameters">(@RequestBody
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;otherInformation)</span></div>
<div class="block">Reject an antiquity and send mails.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>otherInformation</code> - map which containt the review and the id of the antiquity</dd>
<dt>Returns:</dt>
<dd>ResponseEntity containing a Map <span class="invalid-tag">invalid input: '&lt;'</span>String, String&gt;, with the message to know the result</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="acceptAntiquity(java.util.Map)">
<h3>acceptAntiquity</h3>
<div class="member-signature"><span class="annotations">@PreAuthorize("hasAuthority(\'ROLE_Antiquarian\')")
@PutMapping("/acceptAntiquity")
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">org.springframework.http.ResponseEntity&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&gt;</span>&nbsp;<span class="element-name">acceptAntiquity</span><wbr><span class="parameters">(@RequestBody
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;otherInformation)</span></div>
<div class="block">Accept an antiquity,  send mails adn apply commission.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>otherInformation</code> - map which containt the id of the antiquity</dd>
<dt>Returns:</dt>
<dd>ResponseEntity containing a Map <span class="invalid-tag">invalid input: '&lt;'</span>String, String&gt;, with the message to know the result</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="buyListing(java.lang.Integer)">
<h3>buyListing</h3>
<div class="member-signature"><span class="annotations">@PostMapping("/{id}/buy")
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">org.springframework.http.ResponseEntity&lt;?&gt;</span>&nbsp;<span class="element-name">buyListing</span><wbr><span class="parameters">(@PathVariable
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;id)</span></div>
<div class="block">Handles the purchase process for a specific listing by its ID.
 This method creates a payment authorization request using PayPal
 and returns a payment approval URL for the user.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>id</code> - The unique identifier of the listing to be purchased.</dd>
<dt>Returns:</dt>
<dd>A ResponseEntity containing the payment approval URL if successful,
         or an error message and HTTP status code if the operation fails.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="executePayment(java.lang.String,java.lang.String)">
<h3>executePayment</h3>
<div class="member-signature"><span class="annotations">@GetMapping("/payment/execute")
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">org.springframework.http.ResponseEntity&lt;?&gt;</span>&nbsp;<span class="element-name">executePayment</span><wbr><span class="parameters">(@RequestParam("paymentId")
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;paymentId,
 @RequestParam("PayerID")
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;payerId)</span></div>
<div class="block">Executes a payment transaction using PayPal API. This method verifies the payment status,
 retrieves custom metadata related to the transaction, and updates the associated listing state
 to "sold" if the payment is approved.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>paymentId</code> - the unique identifier of the PayPal payment</dd>
<dd><code>payerId</code> - the unique identifier of the payer provided by PayPal</dd>
<dt>Returns:</dt>
<dd>a ResponseEntity containing a success message with the listingId if the payment is
         successfully processed, or an error message if the payment fails or encounters an exception</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAntiquitiesByState(java.lang.String)">
<h3>getAntiquitiesByState</h3>
<div class="member-signature"><span class="annotations">@PreAuthorize("hasAuthority(\'ROLE_Antiquarian\')")
@GetMapping("/by-state")
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">org.springframework.http.ResponseEntity&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../Class/ListingWithPhotosDto.html" title="class in be.anticair.anticairapi.Class">ListingWithPhotosDto</a>&gt;&gt;</span>&nbsp;<span class="element-name">getAntiquitiesByState</span><wbr><span class="parameters">(@RequestParam
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;mailAntiquarian)</span></div>
<div class="block">Endpoint to retrieve all antiquities associated with a specific antiquarian that have a state of 0 or 1.

 <p>This method processes the antiquities linked to the provided antiquarian's email, retrieves the associated photos,
 and maps the data to a DTO that includes the antiquities' details along with their photo URLs.</p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>mailAntiquarian</code> - the email of the antiquarian whose antiquities are to be retrieved</dd>
<dt>Returns:</dt>
<dd>a <code>ResponseEntity</code> containing a list of <a href="../../Class/ListingWithPhotosDto.html" title="class in be.anticair.anticairapi.Class"><code>ListingWithPhotosDto</code></a>,
         where each DTO includes antiquity details and a list of associated photo URLs</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="../../Class/ListingWithPhotosDto.html" title="class in be.anticair.anticairapi.Class"><code>ListingWithPhotosDto</code></a></li>
<li><a href="../../Class/PhotoAntiquity.html" title="class in be.anticair.anticairapi.Class"><code>PhotoAntiquity</code></a></li>
<li><a href="../service/ListingService.html#getAntiquitiesByState(java.lang.String)"><code>ListingService.getAntiquitiesByState(String)</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAntiquitiesByMailSeller(java.lang.String)">
<h3>getAntiquitiesByMailSeller</h3>
<div class="member-signature"><span class="annotations">@GetMapping("/byMailSeller")
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">org.springframework.http.ResponseEntity&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../Class/ListingWithPhotosDto.html" title="class in be.anticair.anticairapi.Class">ListingWithPhotosDto</a>&gt;&gt;</span>&nbsp;<span class="element-name">getAntiquitiesByMailSeller</span><wbr><span class="parameters">(@RequestParam
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;mailSeller)</span></div>
<div class="block">Retrieves a list of antiquities with their associated photos for a specific seller's email.

 This method handles a GET request to fetch all antiquities related to a given seller's email.
 It includes the details of the antiquities along with the URLs of their associated photos.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>mailSeller</code> - The email address of the seller whose antiquities are being retrieved.</dd>
<dt>Returns:</dt>
<dd>A ResponseEntity containing a list of `ListingWithPhotosDto` objects, each representing an antiquity
         with its details and associated photo URLs.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateIsDisplay(java.lang.Long)">
<h3>updateIsDisplay</h3>
<div class="member-signature"><span class="annotations">@PutMapping("/isDisplay/{id}")
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">org.springframework.http.ResponseEntity&lt;<a href="../../Class/Listing.html" title="class in be.anticair.anticairapi.Class">Listing</a>&gt;</span>&nbsp;<span class="element-name">updateIsDisplay</span><wbr><span class="parameters">(@PathVariable
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;id)</span></div>
<div class="block">Updates the 'isDisplay' field of a listing to false based on the provided ID.

 This method handles a PUT request to update the `isDisplay` field of a listing. It calls the service
 layer to perform the update and returns the updated listing in the response body.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>id</code> - The ID of the listing to update.</dd>
<dt>Returns:</dt>
<dd>A ResponseEntity containing the updated `Listing` object with the `isDisplay` field set to `false`.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
